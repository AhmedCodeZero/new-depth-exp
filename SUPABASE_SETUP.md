# إعداد Supabase للمشروع

## الخطوات المطلوبة:

### 1. إنشاء جدول contact_messages في Supabase

1. اذهب إلى [Supabase Dashboard](https://supabase.com/dashboard)
2. اختر مشروعك: `https://lhrtlvnpslkjjqcofryx.supabase.co`
3. اذهب إلى **SQL Editor**
4. انسخ محتوى ملف `supabase-setup.sql` والصقه في المحرر
5. اضغط **Run** لتنفيذ الأوامر

### 2. التحقق من إنشاء الجدول

1. اذهب إلى **Table Editor**
2. تأكد من وجود جدول `contact_messages`
3. تأكد من وجود الأعمدة التالية:
   - `id` (Primary Key)
   - `name` (Required)
   - `email` (Required)
   - `phone` (Optional)
   - `company` (Optional)
   - `service` (Optional)
   - `message` (Required)
   - `status` (Default: 'new')
   - `created_at` (Auto timestamp)
   - `updated_at` (Auto timestamp)

### 3. اختبار النظام

1. اذهب إلى صفحة التواصل في الموقع: `/contact`
2. املأ النموذج وأرسل رسالة
3. تحقق من ظهور الرسالة في Supabase
4. اذهب إلى صفحة الأدمن: `/admin`
5. اضغط على تبويب "الطلبات"
6. تحقق من ظهور الرسالة المرسلة

## الميزات المتاحة:

### في صفحة التواصل:
- ✅ إرسال رسائل التواصل
- ✅ التحقق من صحة البيانات
- ✅ رسائل النجاح والخطأ
- ✅ إعادة تعيين النموذج بعد الإرسال

### في صفحة الأدمن:
- ✅ عرض جميع رسائل التواصل
- ✅ تصفية الرسائل حسب الحالة (جديدة، مقروءة، منتهية)
- ✅ تحديث حالة الرسائل
- ✅ ترقيم الصفحات
- ✅ إمكانية الرد عبر البريد الإلكتروني

### في قاعدة البيانات:
- ✅ جدول منظم مع فهارس
- ✅ تحديث تلقائي للتواريخ
- ✅ التحقق من صحة البيانات
- ✅ تعليقات توضيحية

## ملاحظات مهمة:

1. **الأمان**: تأكد من إعداد سياسات RLS إذا كنت تريد حماية إضافية
2. **النسخ الاحتياطي**: قم بعمل نسخة احتياطية من قاعدة البيانات بانتظام
3. **المراقبة**: راقب حجم البيانات وأداء الاستعلامات

## استكشاف الأخطاء:

إذا واجهت مشاكل:

1. تحقق من صحة بيانات الاتصال في `lib/supabase.ts`
2. تأكد من إنشاء الجدول بشكل صحيح
3. تحقق من سجلات الأخطاء في وحدة تحكم المتصفح
4. تحقق من سجلات Supabase

## الدعم:

إذا كنت تحتاج مساعدة إضافية، يمكنك:
- مراجعة [وثائق Supabase](https://supabase.com/docs)
- مراجعة [وثائق Next.js](https://nextjs.org/docs)
